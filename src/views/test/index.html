<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">
    <title>地理编码(地址->经纬度)</title>
    <link rel="stylesheet" href="https://a.amap.com/jsapi_demos/static/demo-center/css/demo-center.css" />
    <style>
        html,
        body,
        #container {
            height: 100%;
            width: 100%;
        }
        
        .btn {
            width: 10rem;
            margin-left: 6.8rem;
        }
    </style>
</head>

<body>
    <div id="container"></div>
    <div class="input-card" style='width:28rem;'>
        <label style='color:grey'>地理编码，根据地址获取经纬度坐标</label>
        <div class="input-item">
            <div class="input-item-prepend"><span class="input-item-text">地址</span></div>
            <input id='address' type="text" value='上海市浦东新区老上海8号餐厅停车场-出入口'>
        </div>
        <div class="input-item">
            <div class="input-item-prepend"><span class="input-item-text">经纬度</span></div>
            <input id='lnglat' disabled type="text">
        </div>
        <input id="geo" type="button" class="btn" value="地址 -> 经纬度" />
    </div>
    <script type="text/javascript" src="https://webapi.amap.com/maps?v=1.4.12&key=501b694597dee961f2d164eb2cdc0965&plugin=AMap.Geocoder,AMap.Geolocation,AMap.PlaceSearch"></script>
    <script type="text/javascript">
        var map = new AMap.Map("container", {
            resizeEnable: true
        });

        //获取当前定位
        // var geolocation = new AMap.Geolocation({
        //     enableHighAccuracy: true, //是否使用高精度定位，默认:true
        //     timeout: 10000, //超过10秒后停止定位，默认：无穷大
        //     maximumAge: 0, //定位结果缓存0毫秒，默认：0
        //     convert: true, //自动偏移坐标，偏移后的坐标为高德坐标，默认：true
        //     showButton: true, //显示定位按钮，默认：true
        //     buttonPosition: 'RB', //定位按钮停靠位置，默认：'LB'，左下角
        //     buttonOffset: new AMap.Pixel(10, 20), //定位按钮与设置的停靠位置的偏移量，默认：Pixel(10, 20)
        //     showMarker: true, //定位成功后在定位到的位置显示点标记，默认：true
        //     showCircle: true, //定位成功后用圆圈表示定位精度范围，默认：true
        //     panToLocation: true, //定位成功后将定位到的位置作为地图中心点，默认：true
        //     zoomToAccuracy: true //定位成功后调整地图视野范围使定位位置及精度范围视野内可见，默认：false
        // });
        // var geocoder = new AMap.Geocoder({
        //     city: '全国',
        //     radius: 200,
        //     batch: true,
        //     extensions: 'all'

        // });
        // map.addControl(geolocation);
        // geolocation.getCurrentPosition(function(status, result) {
        //     var lat = result.position.lat;
        //     var lng = result.position.lng;
        //     geocoder.getAddress([121.50068, 31.239992], function(s, r) {

        //     })
        // });





        //地址解析
        /*  var geocoder, marker;

         function geoCode() {
             if (!geocoder) {
                 geocoder = new AMap.Geocoder({
                     city: "全国", //城市设为北京，默认：“全国”
                     batch: false,
                 });
             }
             var address = '上海市浦东新区老上海8号餐厅停车场-出入口';
             geocoder.getLocation(address, function(status, result) {
             });
         }
         document.getElementById("geo").onclick = geoCode;
         document.getElementById('address').onkeydown = function(e) {
             if (e.keyCode === 13) {
                 geoCode();
                 return false;
             }
             return true;
         }; */















        var placeSearch = new AMap.PlaceSearch({
            city: '全国',
            map: map,
            children: 0,
            //type: '汽车服务|汽车销售|汽车维修|摩托车服务|餐饮服务|购物服务|生活服务|体育休闲服务|医疗保健服务|住宿服务|风景名胜|商务住宅|政府机构及社会团体|科教文化服务|交通设施服务|金融保险服务|公司企业|道路附属设施|地名地址信息|公共设施',
            extensions: 'all',
            autoFitView: false
        })
        placeSearch.search('老上海8号餐厅', function(status, result) {

        })
    </script>

</body>

</html>